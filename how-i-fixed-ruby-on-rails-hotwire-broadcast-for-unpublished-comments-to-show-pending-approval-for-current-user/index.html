<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <script type="application/ld+json">

{  
  "@context":"http://schema.org",
  "@type":"Website",
  "@id":"https:\/\/www.avramescu.net\/",
  "author": {
    "@type": "Person",
    "name": "Razvan Avramescu",
    
    "image": "https://www.gravatar.com/avatar/49b07cb9e0a35138a614bd93c12079ad"
    
  },
  "name":"Razvan-Marian AVRAMESCU",
  "description":"\u003cp\u003eIn my recent project, I faced a challenge with broadcasting comments in a Ruby on Rails application using Hotwire. The goal was to ensure that unpublished comments would only be visible to the user who created them, while published comments would be visible to everyone. Here’s how I tackled this issue.\u003c\/p\u003e",
  "url":"https:\/\/www.avramescu.net\/how-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user\/",
  "keywords":"[]"
}

</script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.85.0 with theme Tranquilpeak 0.5.1-BETA">
<meta name="author" content="Razvan Avramescu">
<meta name="keywords" content="">
<meta name="description" content="In my recent project, I faced a challenge with broadcasting comments in a Ruby on Rails application using Hotwire. The goal was to ensure that unpublished comments would only be visible to the user who created them, while published comments would be visible to everyone. Here’s how I tackled this issue.">


<meta property="og:description" content="In my recent project, I faced a challenge with broadcasting comments in a Ruby on Rails application using Hotwire. The goal was to ensure that unpublished comments would only be visible to the user who created them, while published comments would be visible to everyone. Here’s how I tackled this issue.">
<meta property="og:type" content="article">
<meta property="og:title" content="How I Fixed Ruby on Rails Hotwire Broadcast for Unpublished Comments to Show Pending Approval for Current User">
<meta name="twitter:title" content="How I Fixed Ruby on Rails Hotwire Broadcast for Unpublished Comments to Show Pending Approval for Current User">
<meta property="og:url" content="https://www.avramescu.net/how-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user/">
<meta property="twitter:url" content="https://www.avramescu.net/how-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user/">
<meta property="og:site_name" content="Razvan-Marian AVRAMESCU">
<meta property="og:description" content="In my recent project, I faced a challenge with broadcasting comments in a Ruby on Rails application using Hotwire. The goal was to ensure that unpublished comments would only be visible to the user who created them, while published comments would be visible to everyone. Here’s how I tackled this issue.">
<meta name="twitter:description" content="In my recent project, I faced a challenge with broadcasting comments in a Ruby on Rails application using Hotwire. The goal was to ensure that unpublished comments would only be visible to the user who created them, while published comments would be visible to everyone. Here’s how I tackled this issue.">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2025-07-27T00:00:00">
  
  
    <meta property="article:modified_time" content="2025-07-27T00:00:00">
  
  
  
    
      <meta property="article:section" content="programming">
    
      <meta property="article:section" content="ruby">
    
      <meta property="article:section" content="rails">
    
      <meta property="article:section" content="hotwire">
    
  
  
    
      <meta property="article:tag" content="ruby">
    
      <meta property="article:tag" content="rails">
    
      <meta property="article:tag" content="hotwire">
    
      <meta property="article:tag" content="comments">
    
      <meta property="article:tag" content="broadcast">
    
      <meta property="article:tag" content="approval">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@captivintrafic">


  <meta name="twitter:creator" content="@captivintrafic">






  <meta property="og:image" content="https://www.gravatar.com/avatar/49b07cb9e0a35138a614bd93c12079ad?s=640">
  <meta property="twitter:image" content="https://www.gravatar.com/avatar/49b07cb9e0a35138a614bd93c12079ad?s=640">






    <title>How I Fixed Ruby on Rails Hotwire Broadcast for Unpublished Comments to Show Pending Approval for Current User</title>

    <link rel="icon" href="https://www.avramescu.net/favicon.png">
    

    

    <link rel="canonical" href="https://www.avramescu.net/how-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    
    <link rel="stylesheet" href="https://www.avramescu.net/css/style-chfakmiiydj3ocrhl1vyhgzlyhpeocbzohmrm0t1eekygzlpr3qzcfy18h.min.css" />
    
    

    
      
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MCESPQLL2N"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-MCESPQLL2N', { 'anonymize_ip': false });
}
</script>

    

    

    
    <script>
    function setTheme(themeName) {
        if(themeName === 'dark') {
            document.documentElement.classList.remove('theme--light');
            document.documentElement.classList.add('theme--dark');
        }
        else {
            document.documentElement.classList.remove('theme--dark');
            document.documentElement.classList.add('theme--light');
        }

        localStorage.setItem('theme', themeName);
        document.documentElement.setAttribute('data-theme', themeName);
    }

    var currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;

    
    if (currentTheme) {
        if (currentTheme === 'dark') {
            setTheme('dark');
        } else {
            setTheme('light');
        }
    }
    else {
        
        if (window.matchMedia("(prefers-color-scheme: dark)")){
            setTheme('dark');
        }
        else if (window.matchMedia("(prefers-color-scheme: light)")){
            setTheme('light');
        }
        else {
            
            setTheme('dark');
        }
    }

    var mqDark = window.matchMedia('(prefers-color-scheme: dark)');
    var mqLight = window.matchMedia('(prefers-color-scheme: light)');
    
    function checkTheme(event) {
        if (event.matches) {
            if (event.media.includes('dark')) {
                setTheme('dark');
                document.getElementById('slider').checked = false;
            }
            if (event.media.includes('light')) {
                setTheme('light');
                document.getElementById('slider').checked = true;
            }
        }
    }
    
    try {
      mqDark.addEventListener('change', checkTheme);
      mqLight.addEventListener('change', checkTheme);
    } catch (maybeSafari) {
      try {
        mqDark.addListener(checkTheme);
        mqLight.addListener(checkTheme);
      } catch (dontknow) {
        
      }
    }
</script>
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="1">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.avramescu.net/" aria-label="Go to homepage">Razvan-Marian AVRAMESCU</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://www.avramescu.net/#about" aria-label="Open the link: /#about">
    
    
    
      
        <img class="header-picture" src="https://www.gravatar.com/avatar/49b07cb9e0a35138a614bd93c12079ad?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="1">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a class="sidebar-image-link" href="https://www.avramescu.net/">
          <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/49b07cb9e0a35138a614bd93c12079ad?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Razvan Avramescu</h4>
        
          <h5 class="sidebar-profile-bio">I am a father, a husband, a developer and occasionally cyclist.</h5>
        
        
          <label id="switch" class="switch">
    <input type="checkbox" onchange="toggleTheme()" id="slider" aria-label="Switch between Dark and Light mode">
    <span class="slider round"></span>
</label>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.avramescu.net/" title="Home">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.avramescu.net/categories" title="Categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.avramescu.net/tags" title="Tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.avramescu.net/archives" title="Archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.avramescu.net/index.xml" title="RSS">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/avra911" target="_blank" rel="noopener" title="GitHub">
    
      <i class="sidebar-button-icon fab fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/razvan-avramescu/" target="_blank" rel="noopener" title="Linkedin">
    
      <i class="sidebar-button-icon fab fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">Linkedin</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.avramescu.net/#about" title="About">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/captivintrafic" target="_blank" rel="noopener" title="Twitter">
    
      <i class="sidebar-button-icon fab fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
      
    </ul>    
  </div>
</nav>

      

      <div id="main" data-behavior="1"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title">
      How I Fixed Ruby on Rails Hotwire Broadcast for Unpublished Comments to Show Pending Approval for Current User
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2025-07-27T00:00:00Z">
        
  July 27, 2025

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.avramescu.net/categories/programming">programming</a>, 
    
      <a class="category-link" href="https://www.avramescu.net/categories/ruby">ruby</a>, 
    
      <a class="category-link" href="https://www.avramescu.net/categories/rails">rails</a>, 
    
      <a class="category-link" href="https://www.avramescu.net/categories/hotwire">hotwire</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>In my recent project, I faced a challenge with broadcasting comments in a Ruby on Rails application using Hotwire. The goal was to ensure that unpublished comments would only be visible to the user who created them, while published comments would be visible to everyone. Here’s how I tackled this issue.</p>
<p>This post details the changes I made to the comment model and the view to achieve the desired functionality, ensuring a smooth user experience while maintaining the integrity of the comment approval process.</p>
<hr>
<h2 id="the-problem">The Problem</h2>
<p>Initially, the broadcasting logic for comments was straightforward but lacked the necessary checks for unpublished comments. The existing code was broadcasting all comments to everyone, which was not ideal for comments pending approval. Additionally, the Ruby on Rails models were also lacking any information about the user session, further complicating the management of comment visibility and user interactions.</p>
<hr>
<h2 id="the-solution">The Solution</h2>
<p>I refactored the broadcasting logic in the <code>Comment</code> model to separate the concerns of creating, updating and destroying comments. Here’s a breakdown of the changes I made:</p>
<h3 id="updated-comment-model">Updated Comment Model</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Comment</span> <span style="color:#f92672">&lt;</span> <span style="color:#66d9ef">ApplicationRecord</span>
  belongs_to <span style="color:#e6db74">:user</span>
  validates_presence_of <span style="color:#e6db74">:content</span>

  after_create_commit <span style="color:#e6db74">:broadcast_create</span>
  after_update_commit <span style="color:#e6db74">:broadcast_update</span>
  after_destroy_commit <span style="color:#e6db74">:broadcast_destroy</span>

  <span style="color:#66d9ef">private</span>

  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">broadcast_create</span>
    <span style="color:#66d9ef">if</span> published
      broadcast_append_to <span style="color:#e6db74">&#34;comments&#34;</span>, <span style="color:#e6db74">target</span>: <span style="color:#e6db74">&#34;comments&#34;</span>
    <span style="color:#66d9ef">else</span>
      broadcast_append_to <span style="color:#e6db74">&#34;comments_</span><span style="color:#e6db74">#{</span>user<span style="color:#f92672">.</span>id<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">target</span>: <span style="color:#e6db74">&#34;comments&#34;</span>
    <span style="color:#66d9ef">end</span>
  <span style="color:#66d9ef">end</span>

  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">broadcast_update</span>
    <span style="color:#66d9ef">if</span> published
      <span style="color:#75715e"># now visible for everyone</span>
      broadcast_append_to <span style="color:#e6db74">&#34;comments&#34;</span>, <span style="color:#e6db74">target</span>: <span style="color:#e6db74">&#34;comments&#34;</span>
      broadcast_append_to <span style="color:#e6db74">&#34;comments_</span><span style="color:#e6db74">#{</span>user<span style="color:#f92672">.</span>id<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">target</span>: <span style="color:#e6db74">&#34;comments&#34;</span>
    <span style="color:#66d9ef">else</span>
      <span style="color:#75715e"># no longer public → remove from everyone, but keep for author</span>
      broadcast_remove_to <span style="color:#e6db74">&#34;comments&#34;</span>
      broadcast_append_to <span style="color:#e6db74">&#34;comments_</span><span style="color:#e6db74">#{</span>user<span style="color:#f92672">.</span>id<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">target</span>: <span style="color:#e6db74">&#34;comments&#34;</span>
    <span style="color:#66d9ef">end</span>
  <span style="color:#66d9ef">end</span>

  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">broadcast_destroy</span>
    broadcast_remove_to <span style="color:#e6db74">&#34;comments&#34;</span>
    broadcast_remove_to <span style="color:#e6db74">&#34;comments_</span><span style="color:#e6db74">#{</span>user<span style="color:#f92672">.</span>id<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
  <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>
</code></pre></div><h3 id="updated-view-logic">Updated View Logic</h3>
<p>In the view, I modified the Turbo stream subscription to ensure that the current user only receives broadcasts for their unpublished comments. Here’s the updated code:</p>
<pre><code class="language-erb" data-lang="erb">&lt;% if current_user %&gt;
  &lt;%= turbo_stream_from &quot;comments_#{current_user.id}&quot; %&gt;
&lt;% else %&gt;
  &lt;%= turbo_stream_from &quot;comments&quot; %&gt;
&lt;% end %&gt;
</code></pre><h3 id="conclusion">Conclusion</h3>
<p>These changes not only improved the user experience by ensuring that users could see their unpublished comments but also maintained the overall integrity of the comment system. By implementing this logic, I was able to create a more robust and user-friendly application.</p>
<p>If you’re working with Ruby on Rails and Hotwire, I hope this solution helps you manage comment broadcasts more effectively!</p>
              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.avramescu.net/tags/ruby/">ruby</a>

  <a class="tag tag--primary tag--small" href="https://www.avramescu.net/tags/rails/">rails</a>

  <a class="tag tag--primary tag--small" href="https://www.avramescu.net/tags/hotwire/">hotwire</a>

  <a class="tag tag--primary tag--small" href="https://www.avramescu.net/tags/comments/">comments</a>

  <a class="tag tag--primary tag--small" href="https://www.avramescu.net/tags/broadcast/">broadcast</a>

  <a class="tag tag--primary tag--small" href="https://www.avramescu.net/tags/approval/">approval</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://www.avramescu.net/three-months-in-passing-the-probation-period-at-onapsis/" data-tooltip="Three Months In – Passing the Probation Period at Onapsis" aria-label="NEXT: Three Months In – Passing the Probation Period at Onapsis">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://www.avramescu.net/how-i-ended-up-choosing-the-ford-kuga-over-the-rav4-in-romania-and-why-it-was-the-best-value-suv/" data-tooltip="How I Ended Up Choosing the Ford Kuga Over the RAV4 in Romania And Why It Was the Best Value SUV" aria-label="PREVIOUS: How I Ended Up Choosing the Ford Kuga Over the RAV4 in Romania And Why It Was the Best Value SUV">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
            <i class="fa fa-share-alt" aria-hidden="true"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.avramescu.net/how-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user/" title="Share on %s Facebook" aria-label="Share on %s Facebook">
              <i class="fa-facebook-official" aria-hidden="true"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://www.avramescu.net/how-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user/" title="Share on %s Twitter" aria-label="Share on %s Twitter">
              <i class="fa-twitter" aria-hidden="true"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://www.avramescu.net/how-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user/" title="Share on %s Google&#43;" aria-label="Share on %s Google&#43;">
              <i class="fa-google-plus" aria-hidden="true"></i>
            </a>
          </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
        
          <i class="fa fa-list" aria-hidden="true"></i>
        </a>
      </li>
    </ul>
  
</div>

            
  


          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2025 Razvan Avramescu. Gorgeous theme by <a target="_blank" href="https://github.com/kakawait/hugo-tranquilpeak-theme">Thibaud Leprêtre</a>. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="1">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://www.avramescu.net/three-months-in-passing-the-probation-period-at-onapsis/" data-tooltip="Three Months In – Passing the Probation Period at Onapsis" aria-label="NEXT: Three Months In – Passing the Probation Period at Onapsis">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://www.avramescu.net/how-i-ended-up-choosing-the-ford-kuga-over-the-rav4-in-romania-and-why-it-was-the-best-value-suv/" data-tooltip="How I Ended Up Choosing the Ford Kuga Over the RAV4 in Romania And Why It Was the Best Value SUV" aria-label="PREVIOUS: How I Ended Up Choosing the Ford Kuga Over the RAV4 in Romania And Why It Was the Best Value SUV">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
            <i class="fa fa-share-alt" aria-hidden="true"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.avramescu.net/how-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user/" title="Share on %s Facebook" aria-label="Share on %s Facebook">
              <i class="fa-facebook-official" aria-hidden="true"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://www.avramescu.net/how-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user/" title="Share on %s Twitter" aria-label="Share on %s Twitter">
              <i class="fa-twitter" aria-hidden="true"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://www.avramescu.net/how-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user/" title="Share on %s Google&#43;" aria-label="Share on %s Google&#43;">
              <i class="fa-google-plus" aria-hidden="true"></i>
            </a>
          </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
        
          <i class="fa fa-list" aria-hidden="true"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      
<div id="share-options-bar" class="share-options-bar" data-behavior="1">
  <i id="btn-close-shareoptions" class="fa fa-times"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.avramescu.net%2Fhow-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user%2F" aria-label="Share on %s Facebook">
          <i class="fa-facebook-official" aria-hidden="true"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fwww.avramescu.net%2Fhow-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user%2F" aria-label="Share on %s Twitter">
          <i class="fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3A%2F%2Fwww.avramescu.net%2Fhow-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user%2F" aria-label="Share on %s Google&#43;">
          <i class="fa-google-plus" aria-hidden="true"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-times"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.gravatar.com/avatar/49b07cb9e0a35138a614bd93c12079ad?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Razvan Avramescu</h4>
    
      <div id="about-card-bio">I am a father, a husband, a developer and occasionally cyclist.</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Signal Founder
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker-alt"></i>
        <br/>
        Bucharest, Romania
      </div>
    
  </div>
</div>

    

    
  
    <div id="cover" style="background-image:url('https://res.cloudinary.com/avra911/image/upload/c_scale,q_70,w_1200/v1569606981/avramescu.net/images/cover-avramescu-net.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js" integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>



<script src="https://www.avramescu.net/js/script-yacuutxfvt1eujntvbzebtp3wsud1vohvqlhycduoqw63cdrjpjvhfdasa.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/www.avramescu.net\/how-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user\/';
          
            this.page.identifier = '\/how-i-fixed-ruby-on-rails-hotwire-broadcast-for-unpublished-comments-to-show-pending-approval-for-current-user\/'
          
        };
        $(function(){
          showDisqus = function(){
            
            
            if (window.location.hostname == "localhost") {
              return;
            }

            var disqus_shortname = 'avramescu-net';

            (function() {
              var disqus = document.createElement('script'); 
              disqus.type = 'text/javascript'; 
              disqus.async = true;
              disqus.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(disqus);
            })();
          };
          $('#show-comments').on('click', showDisqus);
          $('#show-comments-2').on('click', showDisqus);
        });
      </script>
    
  




    
  </body>
</html>

